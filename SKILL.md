---
name: thinkphp-skill
description: ThinkPHP 8.x - The leading PHP framework with elegant syntax and powerful features
author: auto-generated by repo2skill
platform: github
source: https://github.com/top-think/framework
tags: [framework, php, mvc, orm, thinkphp]
version: 8.0
generated: 2026-02-20
---

# ThinkPHP 8.x OpenCode Skill

ThinkPHP 是一个开源的、快速、简单的面向对象的 PHP 框架，是为了敏捷 Web 应用开发和简化企业应用开发而诞生的。ThinkPHP 8.x 是最新版本，基于 PHP 8.0+ 重构，遵循 PSR 规范。

## Quick Start

### Installation

```bash
# Create new ThinkPHP project
composer create-project topthink/think tp

# Start development server
cd tp
php think run

# Access at http://localhost:8000
```

### Update Framework

```bash
composer update topthink/framework
```

## Overview

ThinkPHP 8.x 是一个功能完善、性能优越的 PHP 框架，具有以下特点：

- **基于 PHP 8.0+ 重构** - 利用 PHP 8 的新特性
- **遵循 PSR 标准** - 依赖全部升级到 PSR 标准
- **强大的 ORM** - 集成 think-orm 3.0+ 版本
- **灵活的路由** - 支持 RESTful、路由分组、域名路由等
- **完善的日志** - 多通道日志记录
- **丰富的缓存** - 支持多种缓存驱动

## Core Architecture

### Directory Structure

```
tp/
├── app/                    # Application directory
│   ├── controller/         # Controllers
│   ├── model/             # Models
│   ├── middleware/        # Middleware
│   ├── service/           # Services
│   ├── validate/          # Validators
│   └── event/             # Events
├── config/                # Configuration files
├── public/                # Web root
├── route/                 # Route configuration
├── runtime/               # Runtime files
├── view/                 # View templates
├── think                 # Console entry
└── composer.json
```

### Core Classes

| Class | Purpose |
|-------|---------|
| `think\App` | Application container and service manager |
| `think\Route` | Route management and dispatch |
| `think\Request` | HTTP request handling |
| `think\Response` | HTTP response generation |
| `think\Db` | Database query builder |
| `think\Cache` | Cache management |
| `think\Session` | Session handling |
| `think\Cookie` | Cookie management |
| `think\Log` | Logging system |
| `think\Event` | Event management |
| `think\Lang` | Internationalization |

## Routing

### Basic Routing

```php
// route/app.php
use think\facade\Route;

// GET route
Route::get('hello', function () {
    return 'Hello, ThinkPHP!';
});

// Route with parameters
Route::get('user/:id', function ($id) {
    return 'User ID: ' . $id;
});

// Controller routing
Route::get('user/list', 'app\controller\UserController@index');
Route::post('user/create', 'app\controller\UserController@create');
```

### Route Groups

```php
Route::group('api', function () {
    Route::get('users', 'api/UserController@list');
    Route::post('users', 'api\UserController@create');
})->middleware('api');
```

### Resource Routes

```php
Route::resource('articles', 'app\controller\ArticleController');
```

## Controllers

### Basic Controller

```php
<?php
namespace app\controller;

use think\Request;

class UserController
{
    public function index(Request $request)
    {
        $page = $request->param('page', 1);
        $limit = $request->param('limit', 10);
        
        return view('user/list', [
            'page' => $page,
            'limit' => $limit
        ]);
    }
    
    public function save(Request $request)
    {
        $data = $request->param();
        
        // Validation
        $this->validate($data, [
            'name' => 'require|max:50',
            'email' => 'require|email'
        ]);
        
        // Save to database
        $user = \app\model\User::create($data);
        
        return json(['code' => 0, 'msg' => 'success', 'data' => $user]);
    }
}
```

### RESTful Controller

```php
<?php
namespace app\controller;

use think\Request;

class ApiController
{
    protected $model;
    
    public function __construct(\app\model\User $model)
    {
        $this->model = $model;
    }
    
    // GET /api/users
    public function index()
    {
        return $this->model->select();
    }
    
    // GET /api/users/:id
    public function read($id)
    {
        return $this->model->findOrFail($id);
    }
    
    // POST /api/users
    public function create(Request $request)
    {
        return $this->model->create($request->param());
    }
    
    // PUT /api/users/:id
    public function update(Request $request, $id)
    {
        $user = $this->model->findOrFail($id);
        $user->save($request->param());
        return $user;
    }
    
    // DELETE /api/users/:id
    public function delete($id)
    {
        $this->model->destroy($id);
        return json(['code' => 0]);
    }
}
```

## Database & ORM

### Configuration

```php
// config/database.php
return [
    'default' => 'mysql',
    'connections' => [
        'mysql' => [
            'type'            => 'mysql',
            'hostname'        => '127.0.0.1',
            'database'        => 'tp',
            'username'        => 'root',
            'password'        => '',
            'hostport'        => '3306',
            'charset'         => 'utf8mb4',
            'prefix'          => 'tp_',
        ],
    ],
];
```

### Model Definition

```php
<?php
namespace app\model;

use think\Model;

class User extends Model
{
    // Table name
    protected $name = 'user';
    
    // Primary key
    protected $pk = 'id';
    
    // Auto timestamp
    protected $autoWriteTimestamp = 'datetime';
    
    // Create time field
    protected $createTime = 'create_time';
    
    // Update time field
    protected $updateTime = 'update_time';
    
    // Soft delete
    protected $deleteTime = 'delete_time';
    
    // Hidden fields
    protected $hidden = ['password'];
    
    // Visible fields
    protected $visible = ['id', 'name', 'email', 'create_time'];
    
    // Append fields
    protected $append = ['status_text'];
    
    // Type casting
    protected $type = [
        'id'        => 'integer',
        'status'    => 'integer',
        'birthday'  => 'timestamp',
    ];
    
    // Relationships
    public function profile()
    {
        return $this->hasOne(Profile::class);
    }
    
    public function posts()
    {
        return $this->hasMany(Post::class);
    }
}
```

### Query Builder

```php
// Select
$users = \think\Db::name('user')
    ->where('status', 1)
    ->order('id', 'desc')
    ->limit(10)
    ->select();

// Find single record
$user = \think\Db::name('user')
    ->where('email', $email)
    ->find();

// Aggregate
$count = \think\Db::name('user')->count();
$avgAge = \think\Db::name('user')->avg('age');

// Join
$list = \think\Db::name('user')
    ->alias('u')
    ->join('profile p', 'u.id=p.user_id')
    ->field('u.*, p.phone')
    ->select();

// Subquery
$subQuery = \think\Db::name('order')
    ->where('status', 1)
    ->field('user_id, SUM(total) as total')
    ->group('user_id')
    ->buildSql();

$result = \think\Db::table($subQuery . ' as t')
    ->where('total', '>', 1000)
    ->select();
```

### Eloquent ORM

```php
// Find
$user = User::find(1);
$user = User::where('email', $email)->first();

// Create
$user = User::create([
    'name' => 'John',
    'email' => 'john@example.com'
]);

// Update
$user->name = 'Jane';
$user->save();

// Delete
$user->delete();

// Batch update
User::where('status', 0)->update(['status' => 1]);

// Relationships
$profile = $user->profile;
$posts = $user->posts;
```

## Validation

### Basic Validation

```php
<?php
namespace app\validate;

use think\Validate;

class UserValidate extends Validate
{
    protected $rule = [
        'name'  => 'require|max:50',
        'email' => 'require|email|unique:user',
        'age'   => 'number|between:1,150',
    ];
    
    protected $message = [
        'name.require' => 'Name is required',
        'email.email' => 'Invalid email format',
        'age.number'  => 'Age must be a number',
    ];
    
    protected $scene = [
        'edit' => ['name', 'email'],
    ];
}

// Usage in controller
public function save(Request $request)
{
    $validate = new UserValidate();
    if (!$validate->check($request->param())) {
        return json(['code' => 1, 'msg' => $validate->getError()]);
    }
    
    // Validation passed
}
```

### Validator Class

```php
// Using Validate class
$validate = validate('UserValidate');
$validate->scene('edit')->check($data);
```

## Middleware

### Creating Middleware

```php
<?php
namespace app\middleware;

class Auth
{
    public function handle($request, \Closure $next)
    {
        // Check authentication
        if (!$request->user()) {
            return redirect('/login');
        }
        
        return $next($request);
    }
}
```

### Registering Middleware

```php
// config/middleware.php
return [
    'alias' => [
        'auth' => app\middleware\Auth::class,
    ],
    'priority' => [],
];
```

### Middleware in Controller

```php
<?php
namespace app\controller;

class DashboardController
{
    protected $middleware = ['auth'];
    
    // Or exclude some actions
    protected $middleware = [
        'auth' => ['except' => ['index']]
    ];
}
```

## Request & Response

### Request

```php
public function index(Request $request)
{
    // Get parameters
    $request->param('name');        // All parameters
    $request->get('name');         // GET parameters
    $request->post('name');         // POST parameters
    $request->route('id');          // Route parameters
    $request->header('Authorization'); // Headers
    
    // Check method
    $request->isPost();
    $request->isAjax();
    $request->isJson();
    
    // Get input
    $data = $request->all();
    $data = $request->only(['name', 'email']);
    $data = $request->except(['password']);
}
```

### Response

```php
// JSON response
return json(['code' => 0, 'data' => $data]);
return jsonp($data, 'callback');
return xml(['code' => 0, 'data' => $data]);

// Redirect
return redirect('/user/list');
return redirect('/user/edit')->params(['id' => $id]);

// File download
return download($filePath, 'filename.txt');

// Raw response
return response($content, 200, ['Content-Type' => 'text/plain']);
```

## View & Template

### Template Configuration

```php
// config/view.php
return [
    'type'         => 'Think',
    'view_path'    => '',
    'view_suffix'  => 'html',
    'view_depr'    => DIRECTORY_SEPARATOR,
    'tpl_begin'    => '{',
    'tpl_end'      => '}',
    'taglib_begin' => '{',
    'taglib_end'   => '}',
];
```

### Template Usage

```php
// Return view
return view('user/list', [
    'title' => 'User List',
    'users' => $users
]);

// View with template
return view()->assign('title', 'User List')
    ->assign('users', $users)
    ->fetch('user/list');
```

### Template Syntax

```html
<!-- Variables -->
{$name}
{$user.name}
{$user['name']}

<!-- Loop -->
{volist name="list" id="item"}
    {$item.name}
{/volist}

{foreach $list as $item}
    {$item.name}
{/foreach}

{for start="1" end="10"}
    {$i}
{/for}

<!-- Condition -->
{if $status == 1}
    Active
{elseif $status == 2}
    Inactive
{else}
    Unknown
{/if}

<!-- Include -->
{include file="public/header" /}

<!-- Layout -->
{layout name="public/layout" /}

<!-- Empty check -->
{$name|default='Guest'}
```

## Session & Cookie

### Session

```php
// Config - config/session.php
return [
    'type'           => 'file',
    'expire'         => 3600,
    'prefix'         => 'think',
    'auto_start'     => true,
];

// Usage
session('user_id', 1);
$userId = session('user_id');
session('user_id', null);  // Delete
session(null);             // Clear all
```

### Cookie

```php
cookie('username', 'admin', 3600);  // Set
$username = cookie('username');       // Get
cookie('username', null);            // Delete
```

## Cache

### Configuration

```php
// config/cache.php
return [
    'default' => 'file',
    'stores'  => [
        'file' => [
            'type'       => 'File',
            'path'       => '../runtime/cache/',
            'prefix'     => '',
            'expire'     => 0,
        ],
        'redis' => [
            'type'       => 'redis',
            'host'       => '127.0.0.1',
            'port'       => 6379,
            'password'   => '',
            'select'     => 0,
            'timeout'    => 0,
            'expire'     => 0,
            'persistent' => false,
            'prefix'     => '',
        ],
    ],
];
```

### Usage

```php
// Basic operations
cache('key', 'value', 3600);     // Set with expire
$value = cache('key');            // Get
cache('key', null);              // Delete

// Remember pattern
$value = cache('key', function () {
    return db('user')->find(1);
}, 3600);
```

## Logging

### Configuration

```php
// config/log.php
return [
    'default'      => 'file',
    'channels'     => [
        'file' => [
            'type'      => 'File',
            'path'      => '../runtime/log/',
            'max_files' => 30,
            'level'     => ['error', 'warning', 'info'],
        ],
        'daily' => [
            'type'      => 'File',
            'path'      => '../runtime/log/',
            'max_files' => 7,
            'level'     => ['error', 'warning'],
            'realtime_write' => true,
        ],
    ],
];
```

### Usage

```php
// Log levels
log::info('User logged in');
log::error('Database connection failed');
log::warning('Invalid parameter');
log::debug('Debug information');

// With context
log::info('User action', ['user_id' => 1, 'action' => 'login']);

// Exception logging
try {
    // code
} catch (\Exception $e) {
    log::error($e->getMessage());
}
```

## Event System

### Defining Events

```php
// app/event.php
return [
    'bind' => [
        'UserLogin' => app\event\UserLogin::class,
    ],
    'listen' => [
        'UserLogin' => [
            app\listener\UserLogin::class,
        ],
    ],
];
```

### Event Class

```php
<?php
namespace app\event;

class UserLogin
{
    public $user;
    
    public function __construct($user)
    {
        $this->user = $user;
    }
}
```

### Listener

```php
<?php
namespace app\listener;

class UserLogin
{
    public function handle($event)
    {
        // Update last login time
        $event->user->last_login = date('Y-m-d H:i:s');
        $event->user->save();
        
        // Send notification
        // Log activity
    }
}
```

### Triggering Events

```php
// Trigger event
event('UserLogin', [$user]);

// Using facade
\think\facade\Event::trigger('UserLogin', [$user]);
```

## Service Container

### Binding Services

```php
// app/service.php
return [
    'payment' => app\service\PaymentService::class,
    'sms' => [
        'class' => app\service\SmsService::class,
        'bind' => 'Sms',
    ],
];
```

### Using Services

```php
// Via app()
$sms = app('sms');
$sms->send($phone, $message);

// Via facade
\Sms::send($phone, $message);

// Dependency injection
public function __construct(\app\service\SmsService $sms)
{
    $this->sms = $sms;
}
```

## Console Commands

### Creating Commands

```php
<?php
namespace app\command;

use think\console\Command;
use think\console\Input;
use think\console\input\Argument;
use think\console\input\Option;
use think\console\Output;

class TestCommand extends Command
{
    protected function configure()
    {
        $this->setName('test')
            ->setDescription('Test command')
            ->addArgument('name', Argument::OPTIONAL, 'Your name')
            ->addOption('timeout', null, Option::VALUE_REQUIRED, 'Timeout');
    }
    
    protected function execute(Input $input, Output $output)
    {
        $name = $input->getArgument('name') ?: 'World';
        $output->writeln('Hello ' . $name);
    }
}
```

### Register Command

```php
// config/console.php
return [
    'commands' => [
        'app\command\TestCommand',
    ],
];
```

### Running Commands

```bash
# Run command
php think test

# With arguments
php think test John

# With options
php think test --timeout=60
```

## Configuration

### Environment Variables

```bash
# .env file
APP_DEBUG = true
APP_TRACE = false

DATABASE_HOST = localhost
DATABASE_PORT = 3306
DATABASE_NAME = tp
DATABASE_USER = root
DATABASE_PWD =

CACHE_TYPE = redis
REDIS_HOST = 127.0.0.1
REDIS_PORT = 6379
```

### Configuration Files

```
config/
├── app.php          # Application config
├── cache.php        # Cache config
├── console.php      # Console config
├── cookie.php       # Cookie config
├── database.php     # Database config
├── exception.php    # Exception config
├── lang.php         # Language config
├── log.php          # Log config
├── middleware.php   # Middleware config
├── session.php      # Session config
├── view.php         # View config
└── route.php        # Route config
```

## Exception Handling

### Custom Exception

```php
<?php
namespace app\exception;

use think\exception\Handle;
use think\Response;
use Throwable;

class ExceptionHandler extends Handle
{
    public function render($request, Throwable $e): Response
    {
        // JSON API
        if ($request->isAjax()) {
            return json([
                'code' => 500,
                'msg'  => $e->getMessage(),
            ]);
        }
        
        // HTML page
        return view('error/500', [
            'msg' => $e->getMessage()
        ]);
    }
}
```

## Database Migrations

### Creating Migration

```bash
php think make:migration create_user_table
```

### Migration File

```php
<?php
use think\migration\Migrator;

class CreateUserTable extends Migrator
{
    public function up()
    {
        $table = $this->table('user');
        $table
            ->addColumn('name', 'string', ['limit' => 50])
            ->addColumn('email', 'string', ['limit' => 100])
            ->addColumn('password', 'string', ['limit' => 255])
            ->addColumn('create_time', 'datetime')
            ->addColumn('update_time', 'datetime')
            ->create();
    }
    
    public function down()
    {
        $this->table('user')->drop();
    }
}
```

### Running Migrations

```bash
php think migrate
php think migrate:rollback
php think migrate:status
```

## Facades

ThinkPHP provides facades for easy access to services:

| Facade | Service |
|--------|---------|
| `\think\facade\App` | Application container |
| `\think\facade\Cache` | Cache service |
| `\think\facade\Config` | Configuration |
| `\think\facade\Cookie` | Cookie service |
| `\think\facade\Db` | Database |
| `\think\facade\Env` | Environment |
| `\think\facade\Event` | Event system |
| `\think\facade\Lang` | Language |
| `\think\facade\Log` | Logging |
| `\think\facade\Request` | Request |
| `\think\facade\Route` | Routing |
| `\think\facade\Session` | Session |
| `\think\facade\View` | View/Template |

## CLI Commands

| Command | Description |
|---------|-------------|
| `php think run` | Start development server |
| `php think list` | List all commands |
| `php think make:controller` | Create controller |
| `php think make:model` | Create model |
| `php think make:middleware` | Create middleware |
| `php think make:validate` | Create validator |
| `php think make:event` | Create event |
| `php think make:listener` | Create listener |
| `php think make:command` | Create command |
| `php think make:service` | Create service |
| `php think route:list` | List routes |
| `php think clear` | Clear runtime files |

## Best Practices

### Project Structure

```
app/
├── controller/          # Controllers
│   └── api/            # API controllers
├── model/              # Database models
├── view/               # Templates
│   └── api/            # API views (if needed)
├── service/            # Business logic
├── validate/           # Validators
├── middleware/         # Middleware
├── event/             # Events
├── listener/          # Event listeners
├── exception/         # Custom exceptions
└── trait/            # Reusable traits
```

### Naming Conventions

- **Controllers**: `UserController` - singular, CamelCase
- **Models**: `User` - singular, CamelCase
- **Tables**: `user` - singular, lowercase
- **Methods**: `getUserList()` - CamelCase
- **Middleware**: `Auth` - singular, CamelCase

### Development Tips

1. **Use dependency injection** for better testability
2. **Validate all inputs** using validators
3. **Use transactions** for multi-table operations
4. **Log errors** properly in production
5. **Use environment variables** for sensitive data
6. **Enable debug mode** only in development

## Troubleshooting

### Common Issues

**Route not found**
- Clear route cache: `php think clear`
- Check route definition in `route/app.php`

**Database connection failed**
- Check `.env` database configuration
- Verify database server is running

**Session not working**
- Check session configuration
- Ensure `runtime/` directory is writable

**Cache not working**
- Verify cache directory permissions
- Check cache driver configuration

**404 on deployment**
- Ensure URL rewriting is configured
- Check web server configuration

## Developing ThinkPHP Extensions

ThinkPHP 8.x 提供了完善的扩展机制，你可以开发自己的扩展包来扩展框架功能。

### Extension Package Structure

ThinkPHP 扩展包通常包含以下结构：

```
my-ext/
├── src/
│   ├── Service.php          # 服务类（必须）
│   ├── Facade.php          # 门面类（可选）
│   ├── Middleware/          # 中间件
│   ├── Controller/         # 控制器
│   ├── Model/              # 模型
│   ├── console/command/    # 控制台命令
│   └── traits/             # Traits
├── config/                  # 配置文件
├── view/                    # 视图模板
├── route/                   # 路由定义
├── language/                # 语言文件
├── tests/                   # 测试文件
├── composer.json
└── README.md
```

### Creating Extension Service

扩展包需要创建 Service 类来注册服务：

```php
<?php
namespace myext;

use think\Service as BaseService;

class Service extends BaseService
{
    public function register()
    {
        // 绑定服务到容器
        $this->app->bind('myext', function ($app) {
            return new MyExt($app);
        });
        
        // 绑定配置
        $this->app->bind('myext.config', function () {
            return include __DIR__ . '/../config/myext.php';
        });
        
        // 注册中间件
        $this->app->middleware->add(MyExtMiddleware::class);
        
        // 注册事件监听
        $this->app->event->listen('UserLogin', UserLoginListener::class);
    }
    
    public function boot()
    {
        // 启动时执行的初始化操作
        // 可以访问已注册的服务
    }
}
```

### Service Provider Pattern

```php
<?php
namespace myext;

use think\App;

class MyExt
{
    protected $app;
    protected $config;
    
    public function __construct(App $app)
    {
        $this->app = $app;
        $this->config = $app->config->get('myext') ?: [];
    }
    
    public function initialize()
    {
        // 初始化逻辑
    }
    
    public function doSomething()
    {
        // 扩展功能实现
    }
}
```

### Creating Facade for Extension

为扩展创建门面以提供静态调用接口：

```php
<?php
namespace myext\facade;

use think\Facade;

class MyExt extends Facade
{
    protected static function getFacadeClass()
    {
        return 'myext';
    }
}
```

### Configuration Publishing

扩展包可以发布配置文件到应用：

```php
<?php
// 在 composer.json 中定义
{
    "extra": {
        "think": {
            "config": {
                "myext": "config/myext.php"
            }
        }
    }
}
```

用户可以使用命令发布配置：
```bash
php think vendor:publish myext/my-ext
```

### Routing in Extensions

扩展包可以定义自己的路由：

```php
<?php
// src/route.php
use think\facade\Route;

Route::get('myext/api', function () {
    return 'MyExt API';
});

// 带参数
Route::get('myext/api/:id', function ($id) {
    return 'ID: ' . $id;
});

// RESTful 资源路由
Route::resource('myext/items', 'Item');
```

### Middleware in Extensions

```php
<?php
namespace myext\middleware;

class MyExtMiddleware
{
    public function handle($request, \Closure $next)
    {
        // 前置处理
        $request->myext_data = 'processed';
        
        $response = $next($request);
        
        // 后置处理
        $response->header(['X-MyExt' => 'enabled']);
        
        return $response;
    }
}
```

### Console Commands in Extensions

```php
<?php
namespace myext\console\command;

use think\console\Command;
use think\console\Input;
use think\console\Output;

class MyExtCommand extends Command
{
    protected function configure()
    {
        $this->setName('myext:doit')
            ->setDescription('Do something with MyExt');
    }
    
    protected function execute(Input $input, Output $output)
    {
        $myext = app('myext');
        $result = $myext->doSomething();
        
        $output->writeln('Result: ' . $result);
    }
}
```

注册命令：
```php
// src/Service.php
public function register()
{
    $this->commands([
        \myext\console\command\MyExtCommand::class,
    ]);
}
```

### Database in Extensions

扩展包可以定义自己的数据库迁移：

```php
<?php
namespace myext;

use think\migration\Migrator;

class Install extends Migrator
{
    public function up()
    {
        $table = $this->table('myext_items');
        $table->addColumn('name', 'string', ['limit' => 100])
              ->addColumn('status', 'integer', ['default' => 1])
              ->addTimestamps()
              ->create();
    }
}
```

### Events in Extensions

定义扩展自己的事件：

```php
<?php
namespace myext\event;

class SomethingHappened
{
    public $data;
    
    public function __construct($data)
    {
        $this->data = $data;
    }
}
```

触发事件：
```php
// 在扩展中
event('myext.SomethingHappened', [$data]);
```

### Integration with ThinkPHP

#### 依赖注入

扩展类可以通过依赖注入自动解析：

```php
<?php
namespace app\controller;

use myext\MyExt;

class TestController
{
    public function __construct(MyExt $myext)
    {
        $this->myext = $myext;
    }
    
    public function index()
    {
        return $this->myext->doSomething();
    }
}
```

#### 使用门面

```php
use myext\facade\MyExt;

class TestController
{
    public function index()
    {
        return MyExt::doSomething();
    }
}
```

### Publishing Extension

#### composer.json 示例

```json
{
    "name": "yourname/think-myext",
    "description": "My ThinkPHP Extension",
    "type": "think-ext",
    "require": {
        "topthink/framework": "^8.0"
    },
    "autoload": {
        "psr-4": {
            "myext\\": "src/"
        }
    },
    "extra": {
        "think": {
            "services": [
                "myext\\Service"
            ],
            "config": {
                "myext": "config/myext.php"
            }
        }
    }
}
```

#### 注册扩展

扩展安装后会自动注册 Service 类：

```php
// 自动加载机制
// ThinkPHP 会扫描 extra.think.services 数组
// 并实例化对应的 Service 类
```

### Extension Best Practices

1. **命名空间**：使用唯一的命名空间避免冲突
2. **配置分离**：将配置发布到应用而非硬编码
3. **错误处理**：遵循 ThinkPHP 的异常处理机制
4. **日志记录**：使用框架的日志系统
5. **事件驱动**：使用事件系统解耦功能
6. **向后兼容**：尽量保持 API 稳定

### Publishing to Packagist

```bash
# 1. 创建 GitHub 仓库
# 2. 添加 composer.json
# 3. 提交到 GitHub
# 4. 访问 https://packagist.org/packages/submit
# 5. 输入 GitHub 仓库 URL
```

### Useful Extension Examples

官方扩展包：

| 扩展 | 说明 |
|------|------|
| `topthink/think-orm` | 数据库 ORM |
| `topthink/think-helper` | 辅助函数 |
| `topthink/think-container` | 容器 |
| `topthink/think-validate` | 验证器 |
| `topthink/think-view` | 模板引擎 |
| `topthink/think-captcha` | 验证码 |
| `topthink/think-swoole` | Swoole 支持 |
| `topthink/think-websocket` | WebSocket |

---

## Resources

- **Official Website**: http://www.thinkphp.cn
- **Documentation**: https://doc.thinkphp.cn
- **GitHub**: https://github.com/top-think/framework
- **Forum**: https://www.thinkphp.cn/
- **Packagist**: https://packagist.org/packages/topthink/

---

*Generated by repo2skill on 2026-02-20*
*Updated: 2026-02-20 - Added extension development guide*
